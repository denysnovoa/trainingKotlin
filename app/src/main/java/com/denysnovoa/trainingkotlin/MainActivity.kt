package com.denysnovoa.trainingkotlinimport android.os.Bundleimport android.support.v7.app.AppCompatActivityimport android.support.v7.widget.GridLayoutManagerimport android.support.v7.widget.RecyclerViewimport android.view.Menuimport android.view.MenuItemimport com.denysnovoa.trainingkotlin.MediaItem.Type.PHOTOimport com.denysnovoa.trainingkotlin.MediaItem.Type.VIDEOimport com.denysnovoa.trainingkotlin.adapter.MediaAdapterimport com.denysnovoa.trainingkotlin.adapter.MediaProviderimport org.jetbrains.anko.startActivityclass MainActivity : AppCompatActivity() {  val recycler2 by lazy { findViewById(R.id.recycler) as RecyclerView }  val mediaAdapter = MediaAdapter { navigateToDetail(it) }  override fun onCreate(savedInstanceState: Bundle?) {    super.onCreate(savedInstanceState)    setContentView(R.layout.activity_main)    recycler2.layoutManager = GridLayoutManager(this, 2)    recycler2.adapter = mediaAdapter    findMedia(Filter.None)  }  override fun onCreateOptionsMenu(menu: Menu): Boolean {    menuInflater.inflate(R.menu.main_menu, menu)    return super.onCreateOptionsMenu(menu)  }  override fun onOptionsItemSelected(item: MenuItem): Boolean {    val filter = when (item.itemId) {      R.id.filter_photos -> Filter.ByType(PHOTO)      R.id.filter_videos -> Filter.ByType(VIDEO)      else -> Filter.None    }    findMedia(filter)    return super.onOptionsItemSelected(item)  }  private fun navigateToDetail(item: MediaItem) {    startActivity<DetailActivity>(DetailActivity.PARAMETER_ID to item.id)  }  private fun findMedia(filter: Filter) {    MediaProvider.getMediaAsync { media ->      mediaAdapter.items = when (filter) {        Filter.None -> media        is Filter.ByType -> media.filter { it.type == filter.type }      }    }  }}